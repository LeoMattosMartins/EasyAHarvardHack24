import * as JsonRpcLite from 'jsonrpc-lite';
import { RpcTxUpdateNotificationParams, RpcAddressTxNotificationParams, RpcAddressBalanceNotificationParams, Block, Microblock, Transaction } from '@stacks/stacks-blockchain-api-types';
declare type IWebSocket = import('ws') | WebSocket;
interface Subscription {
    unsubscribe(): Promise<void>;
}
export declare class StacksApiWebSocketClient {
    webSocket: IWebSocket;
    idCursor: number;
    pendingRequests: Map<JsonRpcLite.ID, {
        resolve: (result: any) => void;
        reject: (error: any) => void;
    }>;
    eventEmitter: import("eventemitter3")<{
        block: (event: Block) => void;
        microblock: (event: Microblock) => void;
        mempool: (event: Transaction) => void;
        txUpdate: (event: RpcTxUpdateNotificationParams) => any;
        addressTxUpdate: (event: RpcAddressTxNotificationParams) => void;
        addressBalanceUpdate: (event: RpcAddressBalanceNotificationParams) => void;
    }, any>;
    static connect(url?: string): Promise<StacksApiWebSocketClient>;
    constructor(webSocket: IWebSocket);
    handleNotification(data: JsonRpcLite.NotificationObject): void;
    private rpcCall;
    subscribeBlocks(update: (event: Block) => any): Promise<Subscription>;
    subscribeMicroblocks(update: (event: Microblock) => any): Promise<Subscription>;
    subscribeMempool(update: (event: Transaction) => any): Promise<Subscription>;
    subscribeTxUpdates(txId: string, update: (event: RpcTxUpdateNotificationParams) => any): Promise<Subscription>;
    subscribeAddressTransactions(address: string, update: (event: RpcAddressTxNotificationParams) => any): Promise<Subscription>;
    subscribeAddressBalanceUpdates(address: string, update: (event: RpcAddressBalanceNotificationParams) => any): Promise<Subscription>;
}
export declare function connectWebSocketClient(url?: string): Promise<StacksApiWebSocketClient>;
export {};
